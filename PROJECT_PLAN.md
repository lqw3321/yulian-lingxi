# 基于大模型 Agent 与工具链框架的异构工具联动系统

## 一、项目概述

### （一）项目名称
基于大模型 Agent 与工具链框架的异构工具联动系统

### （二）核心定位
打造一款 **"理解自然语言需求→自主选择工具→执行任务→输出结构化结果"** 的可视化 AI 助手，无需用户手动操作工具，仅通过中文描述即可完成生活服务、数据处理、文档生成等实际任务。

**核心特点：**
- **强展示性**：具备 Web 可视化界面，支持现场操作演示
- **完整架构**：覆盖 "前端交互→核心调度→工具执行→结果可视化" 全流程
- **可控难度**：基于开源工具与提示词工程开发，无需底层算法创新

### （三）项目核心价值

1. **展示性突出**：Web 可视化界面，支持现场操作演示，便于评委直观感知成果
2. **技术链路完整**：覆盖全流程，技术点丰富且不冗余，充分体现团队工程实践能力
3. **难度可控**：基于开源工具与提示词工程，6 人可通过模块分工高效推进
4. **实用性强**：能处理多类典型场景需求，成果可直接演示、交互直观

### （四）核心目标
基于开源大模型与工具链框架，开发支持 **5 类工具调用 + Web 可视化交互** 的智能系统，实现 **"自然语言输入→系统自主决策→多工具协同执行→结构化结果输出"** 的闭环。

---

## 二、核心功能与应用场景

### （一）三大核心功能模块

#### 1. 智能意图识别与工具调度（系统 "大脑"）

**核心逻辑：**
- 通过 "提示词引导 + 示例参考"，模型自主分析中文需求
- 判断是否需要调用工具、选择适配工具
- 提取工具所需参数（如从 "查某地天气" 中提取 "地点" 参数）
- 输出标准化调用格式

**优势特性：**
- 无需用户指定工具
- 支持多轮交互补全参数（如用户输入 "查最近的 AI 新闻"，系统自动追问 "需要国内还是国际新闻？"）
- 全程自然语言交互，体现智能决策能力

#### 2. 多工具协同执行（系统 "手脚"）

**5 类工具封装：**

| 工具类别 | 具体功能 |
|---------|---------|
| **生活服务工具** | 天气查询（近 7 天预报 / 气温趋势） |
| **信息检索工具** | 新闻检索（关键词 / 领域筛选） |
| **数据处理工具** | 股票数据查询、数值计算、图表生成（折线图 / 柱状图） |
| **文档生成工具** | 报告 / 邮件 / 总结生成、代码注释生成 |
| **多工具联动** | 跨工具串联（如 "查天气→绘图→写总结"） |

**核心逻辑：**
- 调度层加入 "结果反馈机制"
- 模型可根据上一个工具的输出，判断是否需要继续调用工具、调用哪类工具
- 实现多步骤任务自动拆解与执行

**关键特性：**
- 单个工具出问题不影响整体演示
- 可快速切换备用工具，避免课设翻车

#### 3. 可视化交互与结果输出（系统 "门面"）

**前端 Web 界面：**
- 支持需求输入、对话历史查看
- 工具调用日志展示
- 结果可视化呈现

**结果输出形式：**
- 数据类结果用图表（折线图、柱状图）展示
- 文本类结果用卡片、标签页区分（如 "原始数据""可视化结果""总结文本"）
- 结构化文档（Word/Markdown 格式）支持下载

**界面优化：**
- 可添加 logo、调整布局
- 增加工具状态面板
- 提升美观度与专业性

### （二）典型演示场景

1. **单工具场景**：用户输入 "查广州近 7 天最高气温" → 系统调用天气工具 → 输出气温列表 + 折线图

2. **多工具联动场景**：用户输入 "查贵州茅台近 5 日收盘价，计算涨幅，生成趋势图，再写一段涨跌分析" → 系统依次调用 "股票数据工具→计算工具→绘图工具→文档生成工具" → 输出图表 + 分析报告

3. **文档生成场景**：用户输入 "基于刚才的天气数据，写一份北京周末出行建议" → 系统调用历史天气结果 → 生成结构化出行建议文档

4. **信息检索场景**：用户输入 "最近有哪些 AI 大模型的新闻" → 系统自动调用新闻检索工具，按关键词返回新闻摘要（卡片形式展示）

---

## 三、技术方案与架构设计

### （一）整体架构（三层架构，清晰解耦）

采用 **"前端交互层→核心调度层→工具执行层"** 三层架构，各层职责明确且可独立开发：

| 层级 | 核心职责 |
|------|---------|
| **前端交互层** | 用户需求输入、结果可视化展示、操作日志查看、数据传递 |
| **核心调度层** | 意图识别、工具选择、参数提取、结果整合、多工具联动逻辑 |
| **工具执行层** | 各类工具的接口调用、函数封装、参数校验、错误处理、格式统一 |

### （二）技术栈选型

#### 前端技术栈
- **框架**：React 19 + TypeScript
- **构建工具**：Vite
- **UI 框架**：Tailwind CSS
- **图表库**：Recharts
- **图标库**：Lucide React

#### 后端技术栈（推荐）
- **框架**：FastAPI（Python）或 Flask
- **大模型接入**：支持工具调用的开源中文大模型（如 Qwen、ChatGLM 等）
- **工具链框架**：LangChain / LangGraph 或自定义调度器
- **API 客户端**：httpx / requests

#### 工具 API 资源（免费/低门槛）
- **天气查询**：OpenWeatherMap（免费额度）、和风天气 API
- **新闻检索**：NewsAPI、百度新闻 API
- **股票行情**：Alpha Vantage、Yahoo Finance API
- **文档生成**：基于大模型生成，无需外部 API

### （三）核心逻辑实现

#### 1. 意图识别
- 通过设计提示词（含工具功能描述）+ 示例参考
- 引导模型输出标准化格式：
  ```json
  {
    "tool": "工具名",
    "parameters": {
      "参数1": "值1",
      "参数2": "值2"
    }
  }
  ```

#### 2. 工具协同
- 基于工具链框架模式，让模型 "思考→执行→反馈→再思考"
- 支持多步骤任务拆解与连续调用
- 限制联动步骤上限（如最多连续调用 4 个工具）

#### 3. 结果整合
- 统一工具输出格式
- 核心层提取关键信息
- 调用前端组件生成图文并茂的结构化结果

---

## 四、团队分工

### （一）6 人团队分工（模块独立，工作量均衡）

| 角色 | 负责人 | 核心职责 |
|------|--------|---------|
| **前端开发负责人** | XXX | 搭建 Web 可视化界面，实现 "输入 - 输出" 交互 |
| **核心调度负责人** | XXX | 开发意图识别、工具调度逻辑 |
| **工具开发人员** | XXX | 封装各类工具接口 |
| **前后端协同人员** | XXX | 连接前后端，替换 Mock 为真实 API |
| **测试负责人** | XXX | 全链路测试、边界测试、验收 |
| **文档与项目管理** | XXX | 维护文档、跟踪进度、协调沟通 |

### （二）团队协作机制

1. **文档管理**：用共享文档记录模块对接规范、开发日志与测试用例
2. **协作原则**：
   - 模块独立开发、统一格式对接
   - 单个模块问题不影响整体进度
   - 预留备用方案

---

## 五、开发规划与进度安排（4-5 周落地）

### （一）当前进展情况

1. ✅ **团队分工确定**：6 人角色分配到位，职责明确
2. ✅ **基础框架搭建**：完成代码仓库创建、开发环境配置，编写项目结构目录
3. ✅ **前端原型**：完成界面草图，实现基础输入输出功能
4. 🔄 **调度层原型**：编写初步提示词模板，10 个样本中 8 个正确识别意图
5. 🔄 **工具层原型**：成功调用生活服务类工具接口，实现 "输入城市→返回基础数据" 功能

### （二）下一步重点工作（未来 1-2 周）

1. **完成所有工具的封装与测试**
   - 天气查询工具
   - 新闻检索工具
   - 股票数据查询工具
   - 数据处理工具（计算、图表生成）
   - 文档生成工具

2. **实现核心调度层与工具层的对接**
   - 支持单工具调用
   - 实现多工具联动逻辑
   - 优化提示词，提升意图识别准确率

3. **优化前端界面**
   - 实现图表展示功能
   - 实现文档下载功能
   - 优化 UI 美观度

4. **前后端对接**
   - 替换 Mock 数据为真实 API
   - 配置跨域代理
   - 调试数据传递

### （三）里程碑时间表

| 周次 | 主要任务 | 交付物 |
|------|---------|--------|
| **第 1 周** | 环境搭建、前端基础界面、工具接口调研 | 前端界面原型、工具 API 调研报告 |
| **第 2 周** | 工具封装、调度层开发、意图识别优化 | 5 类工具函数、调度层原型 |
| **第 3 周** | 前后端对接、多工具联动实现 | 完整功能演示、API 对接完成 |
| **第 4 周** | 测试优化、UI 美化、文档完善 | 测试报告、最终演示版本 |
| **第 5 周**（可选） | 功能扩展、性能优化、答辩准备 | 答辩材料、项目文档 |

---

## 六、风险预案

| 可能遇到的问题 | 具体表现 | 应对方向 |
|--------------|---------|---------|
| **模型意图识别不准确** | 把 "查天气" 误判为 "生成文档" 等 | 1. 优化提示词，补充 5 类工具的清晰功能描述<br>2. 增加示例参考（给模型看正确案例）<br>3. 限制工具选择范围，减少模型犹豫 |
| **工具接口调用异常** | API 返回 "参数错误""访问失败" 等 | 1. 在工具函数中增加参数校验（如关键参数不能为空）<br>2. 设置错误重试机制（失败后重新调用）<br>3. 预留 "模拟数据"，API 故障时自动切换，保障演示 |
| **前后端数据传递卡壳** | 前端输入无法传递给后端，或后端结果无法展示 | 1. 用 Web 框架的存储功能保存对话数据<br>2. 统一前后端数据格式<br>3. 参考 Web 框架官方示例代码对接 |
| **多工具联动逻辑混乱** | 调用工具后忘记下一步，或步骤顺序错误 | 1. 加入 "历史记录反馈"，把上一步结果传给模型<br>2. 引导模型先规划步骤再执行<br>3. 限制联动步骤上限（如最多连续调用 4 个工具） |
| **团队协作冲突** | 代码合并冲突、模块对接标准不一致 | 1. 每日短会同步进度，提前沟通对接需求<br>2. 用共享文档明确模块对接规范<br>3. 每周五进行模块交叉校验，及时发现问题 |

---

## 七、项目文件结构

```
yulian-lingxi/
├── frontend/              # 前端代码
│   ├── src/
│   │   ├── api/          # API 接口定义（types.ts, mockWorkflow.ts）
│   │   ├── components/   # React 组件
│   │   │   ├── chat/     # 聊天面板
│   │   │   ├── workflow/ # 工作流面板
│   │   │   └── common/   # 公共组件
│   │   └── layouts/      # 布局组件
│   └── package.json
├── backend/              # 后端代码
│   ├── app/
│   │   ├── core/         # 核心调度层
│   │   │   ├── agent.py  # Agent 调度逻辑
│   │   │   └── prompt.py # 提示词模板
│   │   ├── tools/        # 工具执行层
│   │   │   ├── weather.py
│   │   │   ├── news.py
│   │   │   ├── stock.py
│   │   │   ├── data.py
│   │   │   └── document.py
│   │   └── api/          # API 路由
│   │       └── routes.py
│   ├── requirements.txt
│   └── README.md
├── docs/                 # 项目文档
│   ├── API_SPEC.md       # API 接口规范
│   ├── TOOL_GUIDE.md     # 工具开发指南
│   └── DEVELOPMENT.md    # 开发指南
└── README.md             # 项目总览
```

---

## 八、验收标准

### 功能验收
- [ ] 支持 5 类工具的单工具调用
- [ ] 支持多工具联动（至少 2 个工具串联）
- [ ] 意图识别准确率 ≥ 80%
- [ ] 前端界面完整展示工作流、日志、结果
- [ ] 支持图表可视化展示
- [ ] 支持文档下载功能

### 技术验收
- [ ] 前后端数据格式统一
- [ ] API 接口规范完整
- [ ] 错误处理机制完善
- [ ] 代码结构清晰，注释完整

### 演示验收
- [ ] 能够流畅演示 3 个以上典型场景
- [ ] 演示过程中无明显卡顿或错误
- [ ] UI 界面美观专业

---

## 九、参考资料

### 开源工具链框架
- LangChain: https://python.langchain.com/
- LangGraph: https://langchain-ai.github.io/langgraph/
- AutoGen: https://microsoft.github.io/autogen/

### 开源大模型
- Qwen: https://github.com/QwenLM/Qwen
- ChatGLM: https://github.com/THUDM/ChatGLM3

### API 资源
- OpenWeatherMap: https://openweathermap.org/api
- NewsAPI: https://newsapi.org/
- Alpha Vantage: https://www.alphavantage.co/

---

**文档版本**：v1.0  
**最后更新**：2024年  
**维护者**：项目团队





